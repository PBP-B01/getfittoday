{% load humanize %}
<div class="card product-card shadow-sm" style="width: 16rem; margin: 8px;">
  <img src="{{ product.image_url }}" class="card-img-top" alt="{{ product.name }}" style="height:180px; object-fit:cover;">
  
  <div class="card-body d-flex flex-column">
    <h6 class="card-title" title="{{ product.name }}" style="font-size: 0.9rem; height: 45px; overflow: hidden;">
      {{ product.name|truncatechars:50 }}
    </h6>

    <p class="card-text fw-bold mb-1 fs-5">Rp{{ product.price|intcomma }}</p>

    <div class="d-flex justify-content-between small text-muted mb-2">
      <span>
        <i class="bi bi-star-fill"></i> {{ product.rating|default:"-" }}
      </span>
      <span>
        {{ product.units_sold|default:"" }}
      </span>
    </div>

    <form method="post" action="{% url 'store:add_to_cart' product.pk %}" class="mt-auto form-add-to-cart">
      {% csrf_token %}
      <input type="hidden" name="quantity" value="1">
      <button type="submit" class="btn btn-sm btn-primary w-100">
        + Keranjang
      </button>
    </form>
  </div>
</div>